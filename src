class CarNode:
    """A node representing a car in the parking lot (linked list)."""
    def __init__(self, car_number):
        self.car_number = car_number
        self.next = None


class ParkingLot:
    """Smart Parking Lot Management using Linked List and Dynamic Allocation."""
    def __init__(self, capacity):
        self.capacity = capacity
        self.size = 0
        self.head = None

    def is_full(self):
        return self.size == self.capacity

    def is_empty(self):
        return self.size == 0

    def park_car(self, car_number):
        """Park a new car if space is available."""
        if self.is_full():
            print(f"Parking Lot is FULL. Car {car_number} cannot be parked.")
            return

        new_car = CarNode(car_number)
        new_car.next = self.head
        self.head = new_car
        self.size += 1
        print(f"Car {car_number} parked successfully.")

    def remove_car(self, car_number):
        """Remove a car when it exits."""
        if self.is_empty():
            print("Parking Lot is EMPTY. No cars to remove.")
            return

        prev = None
        current = self.head

        while current:
            if current.car_number == car_number:
                if prev:
                    prev.next = current.next
                else:
                    self.head = current.next
                self.size -= 1
                print(f"Car {car_number} exited the parking lot.")
                return
            prev = current
            current = current.next

        print(f"Car {car_number} not found in the parking lot.")

    def display_parking_lot(self):
        """Display all active parked cars."""
        if self.is_empty():
            print("Parking Lot is EMPTY.")
            return

        print("Cars currently parked:")
        current = self.head
        while current:
            print(f"- Car {current.car_number}")
            current = current.next


# Example Usage
if __name__ == "__main__":
    lot_capacity = int(input("Enter parking lot capacity: "))
    parking_lot = ParkingLot(lot_capacity)

    while True:
        print("\n--- Parking Lot Menu ---")
        print("1. Park a Car")
        print("2. Remove a Car")
        print("3. Display Parking Lot")
        print("4. Exit")

        choice = input("Enter your choice: ")

        if choice == "1":
            car_no = input("Enter Car Number: ")
            parking_lot.park_car(car_no)
        elif choice == "2":
            car_no = input("Enter Car Number to remove: ")
            parking_lot.remove_car(car_no)
        elif choice == "3":
            parking_lot.display_parking_lot()
        elif choice == "4":
            print("Exiting Smart Parking Lot System.")
            break
        else:
            print("Invalid choice. Please try again.")
